@import "tailwindcss";

@theme {
  /* Design Tokens (Light) */
  --color-bg: #fdfaf6;
  --color-bg-muted: rgba(0 0 0 / 0.02);
  --color-surface: #ffffff;
  --color-fg: #6b5d50;
  --color-fg-subtle: #8c7a6b;
  --color-fg-muted: #a1887f;
  --color-accent: #f4926d;
  --color-accent-muted: rgba(244 146 109 / 0.10);
  --color-border: #dcd1c6;
  --color-border-muted: rgba(0 0 0 / 0.05);
  --color-table-head: #f1a978;
  --color-graph-link: #dcd1c6;
  --color-particle: rgba(180 165 150 / 0.60);

  /* Dark Palette (prefixed, will be mapped in .dark scope) */
  --dark-color-bg: #0d121c;
  --dark-color-bg-muted: rgba(255 255 255 / 0.02);
  --dark-color-surface: #2d3748;
  --dark-color-fg: #e2e8f0;
  --dark-color-fg-subtle: #a0aec0;
  --dark-color-fg-muted: #718096;
  --dark-color-accent: #f6ad55;
  --dark-color-accent-muted: rgba(244 146 109 / 0.20);
  --dark-color-border: #4a5568;
  --dark-color-border-muted: rgba(255 255 255 / 0.05);
  --dark-color-table-head: #5b8aae;
  --dark-color-graph-link: rgba(246 173 85 / 0.30);

  /* Typography */
  --font-serif-content: "Noto Serif SC", serif;
  --font-display: "LXGW WenKai TC","LXGW WenKai",sans-serif;
  --font-mono: "Courier New","Consolas",monospace;

  /* Extra Spacing scale (non Tailwind defaults) */
  --space-1.2: 1.2rem;
  --space-1.3: 1.3rem;
  --space-1.6: 1.6rem;
  --space-1.8: 1.8rem;

  /* Radius */
  --radius-xs: 2px;
  --radius-sm: 3px;
  --radius: 4px;
  --radius-md: 8px;
  --radius-pill: 2rem;

  /* Shadows */
  --shadow-xs: 0 2px 4px rgba(0,0,0,0.05);
  --shadow-sm: 0 4px 8px rgba(0,0,0,0.08);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.12);
  --shadow-lg: 0 6px 20px rgba(0,0,0,0.16);
}

/* Dark mode token overrides (re-added after alias cleanup) */
.dark {
  --color-bg: var(--dark-color-bg);
  --color-bg-muted: var(--dark-color-bg-muted);
  --color-surface: var(--dark-color-surface);
  --color-fg: var(--dark-color-fg);
  --color-fg-subtle: var(--dark-color-fg-subtle);
  --color-fg-muted: var(--dark-color-fg-muted);
  --color-accent: var(--dark-color-accent);
  --color-accent-muted: var(--dark-color-accent-muted);
  --color-border: var(--dark-color-border);
  --color-border-muted: var(--dark-color-border-muted);
  --color-table-head: var(--dark-color-table-head);
  --color-graph-link: var(--dark-color-graph-link);
  --color-particle: rgba(246 173 85 / 0.30);
}

/* 全局样式 */
body {
    background-color: var(--color-bg);
    color: var(--color-fg);
    font-family: 'Noto Serif SC', serif;
    transition: background-color 0.5s, color 0.5s;
}
.font-handwriting { font-family: 'LXGW WenKai TC', 'LXGW WenKai', sans-serif; }

/* 页面切换动画 */
.page-fade-enter-active,
.page-fade-leave-active {
  transition: opacity 0.3s ease;
}
.page-fade-enter-from,
.page-fade-leave-to {
  opacity: 0;
}

/* 通用组件样式 */
/* 移除大部分 .markdown-content 细粒度排版规则，转由 @tailwindcss/typography (prose) 负责 */
/* 保留后续要拆分的代码块、表格、引用等将另行迁移 */

/* 代码样式 */
pre, code,
pre[class*="language-"],
code[class*="language-"],
.markdown-content pre,
.markdown-content code,
.markdown-content pre code {
    text-shadow: none !important;
}

.markdown-content code {
    background-color: var(--color-surface);
    border: 1px solid var(--color-border);
    padding: 0.2rem 0.4rem;
    border-radius: 0.25rem;
    font-family: 'Courier New', 'Consolas', monospace;
    font-size: 0.9em;
    color: var(--color-accent);
    font-weight: 500;
}

/* 暗色主题下的代码块 */
.dark .markdown-content pre {
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
    border: 1px solid #334155;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}
/* 亮色主题代码块 */
.markdown-content pre {
    background-color: var(--color-surface);
    border: 1px solid var(--color-border);
    padding: 1.5rem;
    border-radius: 0.5rem;
    overflow-x: auto;
    margin: 1.5rem 0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.markdown-content pre code {
    background: none;
    border: none;
    padding: 0;
    color: var(--color-fg);
    font-weight: normal;
}

/* 代码块顶部装饰条 */
.markdown-content pre::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--color-accent) 0%, #10b981 50%, #3b82f6 100%);
    border-radius: 0.75rem 0.75rem 0 0;
}

/* 引用样式 */
.markdown-content blockquote {
    border-left: 4px solid var(--color-accent);
    background: var(--color-surface);
    color: var(--color-fg-subtle);
    padding: 1rem 1.5rem;
    margin: 1.5rem 0;
    border-radius: 0 0.5rem 0.5rem 0;
    font-style: italic;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.markdown-content blockquote p {
    margin-bottom: 0.5rem;
}

.markdown-content blockquote p:last-child {
    margin-bottom: 0;
}

/* 链接样式 */
.markdown-content a {
    color: var(--color-accent);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: all 0.3s ease;
    font-weight: 500;
}

.markdown-content a:hover {
    border-bottom-color: var(--color-accent);
    color: var(--color-accent);
}

/* 表格样式 */
.markdown-content table {
    width: 100%;
    border-collapse: collapse;
    margin: 1.5rem 0;
    background: var(--color-surface);
    border-radius: 0.5rem;
    overflow: hidden;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.markdown-content th,
.markdown-content td {
    border: 1px solid var(--color-border);
    padding: 0.75rem 1rem;
    text-align: left;
}

.markdown-content th {
    background: var(--color-table-head);
    color: var(--color-bg);
    font-weight: 600;
    font-family: 'LXGW WenKai TC', 'LXGW WenKai', sans-serif;
}

.markdown-content tr:nth-child(even) {
    background-color: rgba(174, 217, 180, 0.1);
}

.dark .markdown-content tr:nth-child(even) {
    background-color: rgba(246, 173, 85, 0.1);
}

/* 分割线样式 */
.markdown-content hr {
    border: none;
    border-top: 2px solid var(--color-border);
    margin: 2.5rem 0;
    opacity: 0.6;
}

/* 图片样式 */
.markdown-content img {
    max-width: 100%;
    height: auto;
    border-radius: 0.5rem;
    margin: 1.5rem auto;
    display: block;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    border: 1px solid var(--color-border);
}

/* 强调文本 */
.markdown-content strong {
    font-weight: 700;
    color: var(--color-fg);
}

.markdown-content em {
    font-style: italic;
    color: var(--color-fg-subtle);
}

/* 删除线 */
.markdown-content del {
    text-decoration: line-through;
    color: var(--color-fg-muted);
}

/* Markdown headings (reintroduced minimal set) */
.markdown-content h1, .markdown-content h2, .markdown-content h3, .markdown-content h4, .markdown-content h5, .markdown-content h6 { font-family: var(--font-display); font-weight:600; color: var(--color-fg); line-height:1.3; }
.markdown-content h1 { font-size:2.5rem; margin:2.5rem 0 1.5rem; border-bottom:2px solid var(--color-border); padding-bottom:.5rem; }
.markdown-content h2 { font-size:2rem; margin:2.2rem 0 1.2rem; }
.markdown-content h3 { font-size:1.6rem; margin:1.8rem 0 1rem; }
.markdown-content h4 { font-size:1.3rem; margin:1.4rem 0 .8rem; }
.markdown-content h5 { font-size:1.1rem; margin:1.2rem 0 .6rem; }
.markdown-content h6 { font-size:1rem; margin:1rem 0 .5rem; color:var(--color-fg-subtle); }
.dark .markdown-content h1, .dark .markdown-content h2, .dark .markdown-content h3, .dark .markdown-content h4, .dark .markdown-content h5, .dark .markdown-content h6 { color: var(--color-fg); }

/* Markdown lists */
.markdown-content ul, .markdown-content ol { padding-left:1.5rem; margin:1rem 0 1.5rem; }
.markdown-content ul { list-style:disc; }
.markdown-content ol { list-style:decimal; }
.markdown-content li { margin-bottom:.5rem; line-height:1.7; }
.markdown-content ul ul, .markdown-content ol ol, .markdown-content ul ol, .markdown-content.ol ul { margin:0.5rem 0; }

/* 响应式设计 */
@media (max-width: 768px) {
    .markdown-content {
        font-size: 16px;
    }

    .markdown-content h1 {
        font-size: 2rem;
    }

    .markdown-content h2 {
        font-size: 1.6rem;
    }

    .markdown-content h3 {
        font-size: 1.3rem;
    }

    .markdown-content pre {
        padding: 1rem;
        font-size: 14px;
    }

    .markdown-content table {
        font-size: 14px;
    }

    .markdown-content th,
    .markdown-content td {
        padding: 0.5rem;
    }
}

/* 汉堡菜单按钮动画 */
.hamburger-menu {
    transition: transform 0.3s ease;
}

.hamburger-menu:hover {
    transform: scale(1.1);
}

/* 移动端菜单滑入动画优化 */
@media (max-width: 767px) {
    .mobile-menu-backdrop {
        backdrop-filter: blur(4px);
    }
    
    .mobile-menu-panel {
        box-shadow: -10px 0 25px rgba(0, 0, 0, 0.15);
    }
    
    /* 确保移动端菜单在最顶层 */
    .mobile-menu-overlay {
        z-index: 9999;
    }
}

/* 桌面端标签容器动画 */
.tags-container .flex.flex-wrap {
    transition: max-height 0.3s ease-in-out;
}

/* 移动端标签容器的渐变遮罩效果 */
@media (max-width: 767px) {
    .tags-container::after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        width: 30px;
        height: calc(100% - 20px);
        background: linear-gradient(to left, var(--color-bg), transparent);
        pointer-events: none;
        z-index: 1;
    }
    
    /* 移动端标签调整 */
    .torn-tag {
        white-space: nowrap;
        font-size: 14px;
        padding: 6px 12px;
    }
    
    /* 移动端提示文字 */
    .tags-container .text-xs {
        color: var(--color-fg-subtle);
    }
}

/* 桌面端标签间距优化 */
@media (min-width: 768px) {
    .tags-container .torn-tag {
        margin-bottom: 8px;
    }
    
    /* 展开按钮样式 */
    .tags-container button[style*="color"] {
        background-color: var(--color-bg-muted);
        border: 1px solid var(--color-border);
    }
    
    .tags-container button[style*="color"]:hover {
        transform: translateY(-1px);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
}

@layer components {
  /* Code block wrapper enhancements */
  .md-code { position:relative; border-radius:0.5rem; overflow-x:auto; box-shadow:0 1px 2px rgba(0,0,0,0.05); border:1px solid var(--color-border); padding:1.5rem; background:var(--color-surface); }
  .dark .md-code { background:linear-gradient(135deg,#0f172a 0%,#1e293b 100%); border-color:#334155; box-shadow:0 4px 12px rgba(0,0,0,0.3); }
  .md-code:before { content:""; position:absolute; left:0; right:0; top:0; height:0.25rem; border-top-left-radius:0.5rem; border-top-right-radius:0.5rem; background:linear-gradient(90deg,var(--color-accent) 0%,#10b981 50%,#3b82f6 100%); }
  .md-inline-code { padding:0.125rem 0.375rem; border-radius:0.25rem; border:1px solid var(--color-border); font-size:0.9em; font-family:var(--font-mono); background:var(--color-surface); color:var(--color-accent); font-weight:500; }
  /* Blockquote */
  .md-quote { font-style:italic; border-left:4px solid var(--color-accent); padding:1rem 1.5rem; margin:1.5rem 0; border-radius:0 0.5rem 0.5rem 0; box-shadow:0 1px 2px rgba(0,0,0,0.05); background:var(--color-surface); color:var(--color-fg-subtle); }
  /* Table styling */
  .md-table { width:100%; margin:1.5rem 0; border-collapse:collapse; overflow:hidden; border-radius:0.5rem; box-shadow:0 1px 2px rgba(0,0,0,0.05); background:var(--color-surface); }
  .md-table th { font-weight:600; background:var(--color-table-head); color:var(--color-bg); font-family:var(--font-display); }
  .md-table th, .md-table td { border:1px solid var(--color-border); padding:0.75rem 1rem; text-align:left; }
  .md-hr { margin:2.5rem 0; border:none; border-top:2px solid var(--color-border); opacity:.6; }
}

/* tags container gradients */
@media (max-width: 767px){ .tags-container::after { background:linear-gradient(to left,var(--color-bg),transparent);} .tags-container .text-xs { color:var(--color-fg-subtle);} }
@media (min-width: 767px){ .tags-container button[style*="color"] { background-color:var(--color-bg-muted); border:1px solid var(--color-border);} }